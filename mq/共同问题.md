### 事务支持
### 怎么做到消息顺序消费
### 事务支持

1. 实现事务
2. 幂等性
3. 消息重复消费问题
4. 队列与topic
5. 消息ack机制

### kafka速度快

1. 使用批量消息提升服务端处理能力

   - 构建批消息和解开批消息分别在发送端和消费端的客户端完成，不仅减轻了 Broker 的压力，最重要的是减少了 Broker 处理请求的次数，提升了总体的处理能力。

2. 使用顺序读写提升磁盘 IO 性能

3. 利用 PageCache 加速消息读写

   - 读写数据步骤

     一种是 PageCache 中有数据，那就直接读取，这样就节省了从磁盘上读取数据的时间；另一种情况是，PageCache 中没有数据，这时候操作系统会引发一个缺页中断，应用程序的读取线程会被阻塞，操作系统把数据从文件中复制到 PageCache 中，然后应用程序再从 PageCache 中继续把数据读出来，这时会真正读一次磁盘上的文件，这个读的过程就会比较慢。

4. ZeroCopy：零拷贝技术

   服务端，处理消费的大致逻辑是这样的：

   - 首先，从文件中找到消息数据，读到内存中；
   - 然后，把消息通过网络发给客户端。

   这个过程中，数据实际上做了 2 次或者 3 次复制：

   1. 从文件复制数据到 PageCache 中，如果命中 PageCache，这一步可以省掉；
   2. 从 PageCache 复制到应用程序的内存空间中，也就是我们可以操作的对象所在的内存；
   3. 从应用程序的内存空间复制到 Socket 的缓冲区，这个过程就是我们调用网络应用框架的 API 发送数据的过程。

5. 