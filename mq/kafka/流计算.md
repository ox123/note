## kafka流计算
- [基本概念](https://juejin.im/entry/59bf56ebf265da065d2b63fa)



### 基于kafka实时日志流成立平台流程

<img src="assets/image-20201107202242928.png" alt="image-20201107202242928" style="zoom:150%;" />

```
1 partitions have leader brokers without a matching listener
```

- 配置

  ```
  config/connect-distributed.properties
  
  bootstrap.servers=localhost:9092
  rest.host.name=localhost
  rest.port=8083
  ```

- 启动connector

  ```shell
  bin/connect-distributed.sh config/connect-distributed.properties
  ```

- 创建connector

  ```
  curl -H "Content-Type:application/json" -H "Accept:application/json" http://localhost:8083/connectors -X POST --data '{"name":"file-connector-nginx","config":{"connector.class":"org.apache.kafka.connect.file.FileStreamSourceConnector","file":"/usr/local/openresty/nginx/logs","tasks.max":"1","topic":"access_log"}}'
  ```

- 查看创建connector

  ```
  curl http://localhost:8083/connectors
  ```

- 查看对应的主题中是否有数据

  ```
  bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic os-check --from-beginning --property value.deserializer=org.apache.kafka.common.serialization.LongDeserializer --property print.key=true --property key.deserializer=org.apache.kafka.streams.kstream.TimeWindowedDeserializer --property key.deserializer.default.windowed.key.serde.inner=org.apache.kafka.common.serialization.Serdes\$StringSerde
  ```

  

- 