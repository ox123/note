- https://kaiwu.lagou.com/course/courseInfo.htm?courseId=549#/detail/pc?id=5325

### 微服务对设计提出了很高的要求，强调“小而专、高内聚”，否则就不能发挥出微服务的优势，甚至可能令问题更糟糕

软件设计质量最高的时候是第一次设计的那个版本，当第一个版本设计上线以后就开始各种需求变更，这常常又会打乱原有的设计。

- 软件的本质是对真实世界的一种模拟，每个软件都能在真实世界中找到他的影子。软件中业务逻辑正确与否的唯一标准就是是否与真实世界一致。
  - 软件要做成什么样，既不由我们来绝定，也不由用户来绝定，而是由客观世界来绝定。
  - 我们最初只能认识真实世界中那些简单、清晰、易于理解的业务逻辑，把它们做到我们的软件里，即每个软件的第一个版本的需求总是那么清晰明了、易于设计。
  - 在我们不断地修复 Bug，实现新需求的过程中，软件的业务逻辑也会越来越接近真实世界，使得我们的软件越来越专业，让用户感觉越来越好用。但是，在软件越来越接近真实世界的过程中，业务逻辑就会变得越来越复杂，软件规模也越来越庞大。

- 软件退化的根源不是软件变更，软件变更只是一个诱因。如果每次软件变更时，适时地进行解耦，进行功能扩展，再实现新的功能，就能保持高质量的软件设计。但如果在每次软件变更时没有调整程序结构，而是在原有的程序结构上不断地塞代码，软件就会退化。这就是软件发展的规律，软件退化的根源。

### 当我们在实现新需求时，在每次实现的过程中，将变更分为两个步骤

1. 在不增加新功能的前提下，重构代码，调整原有程序结构，以适应新功能。
2. 实现新功能。

- 保持软件设计不退化的关键在于每次需求变更的设计，只有保证每次需求变更时做出正确的设计，才能保证软件以一种良性循环的方式不断维护下去。这种正确的设计方式就是“两顶帽子”。

### 如何将真实世界与软件世界对应起来呢

- 真实世界有什么事物，软件世界就有什么对象；

- 真实世界中这些事物都有哪些行为，软件世界中这些对象就有哪些方法；

- 真实世界中这些事物间都有哪些关系，软件世界中这些对象间就有什么关联。



> DDD 给了我们思路：在每次变更的时候，先回到领域模型，基于业务进行领域模型的变更。然后，再基于领域模型的变更，指导程序的变更。这样，不论经历多少次需求变更，始终能够保持设计质量不退化。这样的设计，才能保障系统始终在低成本的状态下，可持续地不断维护下去。